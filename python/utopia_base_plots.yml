# Base plot configuration for models using the Utopia framework
#
# This file contains shared config entries that can be used in the composition
# of plot configurations.
#
# TODO Should these all move to utopya's base plots??
---
# YAML anchors used throughout this file
_:
  labels:
    time:                  &label_time            Time [Steps]

  aesthetics:
    hvline: &style_hvline
      linestyle: solid
      color: grey
      alpha: .4
      linewidth: 2.
      zorder: -42





# =============================================================================
#  ╔═╗╦  ╔═╗╔╦╗  ╔═╗╦═╗╔═╗╔═╗╔╦╗╔═╗╦═╗╔═╗
#  ╠═╝║  ║ ║ ║   ║  ╠╦╝║╣ ╠═╣ ║ ║ ║╠╦╝╚═╗
#  ╩  ╩═╝╚═╝ ╩   ╚═╝╩╚═╚═╝╩ ╩ ╩ ╚═╝╩╚═╚═╝
# =============================================================================
# This is where the above defaults enter the plot configuration
.creator.base:
  based_on:
    - .creator.base
    - .defaults

.creator.pyplot:
  based_on:
    - .creator.pyplot
    - .defaults

.creator.universe:
  based_on:
    - .creator.universe
    - .defaults
  universes: all

.creator.multiverse:
  based_on:
    - .creator.multiverse
    - .defaults


# .. Specializations ..........................................................
.creator.universe.any:
  based_on: .creator.universe
  universes: any

.creator.universe.first:
  based_on: .creator.universe
  universes: first

.creator.universe.all:
  based_on: .creator.universe
  universes: all





# =============================================================================
#  ╔═╗╦  ╔═╗╔╦╗  ╔═╗╦ ╦╔╗╔╔═╗╔╦╗╦╔═╗╔╗╔╔═╗
#  ╠═╝║  ║ ║ ║   ╠╣ ║ ║║║║║   ║ ║║ ║║║║╚═╗
#  ╩  ╩═╝╚═╝ ╩   ╚  ╚═╝╝╚╝╚═╝ ╩ ╩╚═╝╝╚╝╚═╝
# =============================================================================
# -- Overloads of existing plot functions -------------------------------------

.plot.ca:
  based_on:
    - .plot.ca
    - .animation.defaults






# =============================================================================
#  ╔═╗╦╔═╦╔═╗  ╔═╗╔═╗╔╗╔╔╦╗╦╔╦╗╦╔═╗╔╗╔╔═╗
#  ╚═╗╠╩╗║╠═╝  ║  ║ ║║║║ ║║║ ║ ║║ ║║║║╚═╗
#  ╚═╝╩ ╩╩╩    ╚═╝╚═╝╝╚╝═╩╝╩ ╩ ╩╚═╝╝╚╝╚═╝
# =============================================================================

.skip.if_less_than_1D:
  expected_multiverse_ndim: [1, 2, 3, 4, 5]

.skip.if_less_than_2D:
  expected_multiverse_ndim: [2, 3, 4, 5]

.skip.if_more_than_1D:
  expected_multiverse_ndim: [0, 1]

.skip.if_more_than_2D:
  expected_multiverse_ndim: [0, 1, 2]

.skip.if_more_than_3D:
  expected_multiverse_ndim: [0, 1, 2, 3]

.skip.if_more_than_4D:
  expected_multiverse_ndim: [0, 1, 2, 3, 4]

.skip.if_more_than_5D:
  expected_multiverse_ndim: [0, 1, 2, 3, 4, 5]






# =============================================================================
#  ╔═╗╦  ╔═╗╔╦╗  ╦ ╦╔═╗╦  ╔═╗╔═╗╦═╗╔═╗
#  ╠═╝║  ║ ║ ║   ╠═╣║╣ ║  ╠═╝║╣ ╠╦╝╚═╗
#  ╩  ╩═╝╚═╝ ╩   ╩ ╩╚═╝╩═╝╩  ╚═╝╩╚═╚═╝
# =============================================================================

# For specific kinds of representations .......................................

# A time series plot along the x-axis
.hlpr.kind.time_series:
  based_on:
    - .hlpr.ticks.x.si_suffixes

  helpers:
    set_limits:
      x: [min, max]

    axis_specific:
      [~, -1]:  # bottom row
        set_labels:
          x: *label_time



# =============================================================================
#  ╔═╗╔╗╔╦╔╦╗╔═╗╔╦╗╦╔═╗╔╗╔
#  ╠═╣║║║║║║║╠═╣ ║ ║║ ║║║║
#  ╩ ╩╝╚╝╩╩ ╩╩ ╩ ╩ ╩╚═╝╝╚╝
# =============================================================================
# The default animation config
# NOTE These do not enable animation, but merely set parameters.
#      Use `.animation.enabled` or the specific `.animation.<writer>` configs.
.animation.defaults:
  based_on:
    - .animation.defaults    # from utopya

  # By default, use the ffmpeg writer and the mp4 output format
  file_ext: mp4
  animation:
    writer: ffmpeg



# Base configs enabling animation for a writer & including the Utopia defaults
.animation.ffmpeg:
  based_on:
    - .animation.ffmpeg      # from utopya
    - .animation.defaults    # from here

.animation.frames:
  based_on:
    - .animation.frames      # from utopya
    - .animation.defaults    # from here
